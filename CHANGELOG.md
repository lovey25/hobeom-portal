# Changelog

모든 주요 변경사항은 이 파일에 문서화됩니다.

형식은 [Keep a Changelog](https://keepachangelog.com/ko/1.0.0/)를 기반으로 하며,
이 프로젝트는 [Semantic Versioning](https://semver.org/lang/ko/)을 따릅니다.

## [0.3.0] - 2024-12-18

### Added

#### CSV 편집기 앱 (관리자 전용)

- 엑셀 스타일 스프레드시트 인터페이스로 CSV 파일 직접 편집
- **클릭/더블클릭 모드**: 클릭=선택, 더블클릭=편집
- **키보드 네비게이션**:
  - 방향키: 셀 이동 (선택 모드)
  - Enter: 편집 시작 / 아래로 이동 (편집 모드)
  - Shift+Enter: 위로 이동 (편집 모드)
  - Tab: 오른쪽/다음 행으로 이동
  - Shift+Tab: 왼쪽/이전 행으로 이동
  - ESC: 편집 취소
- **컬럼 관리**:
  - 헤더 클릭으로 정렬 (오름차순 ↔ 내림차순)
  - 드래그로 컬럼 폭 조절
  - 숫자/문자열 자동 감지 정렬
- **자동 백업**: 저장 시 `.backup` 파일 자동 생성
- **API**: `/api/csv-editor`, `/api/csv-editor/[filename]`

#### 여행 준비 앱 UX 개선

- **아코디언 그룹화 시스템**:
  - 분류별 그룹: 카테고리로 아이템 묶기
  - 중요도별 그룹: 매우중요 → 중요 → 보통 → 낮음 → 선택 순서
  - 각 그룹별로 접기/펴기 가능
- **그룹 컨트롤**:
  - 전체 접기/펴기 버튼
  - 그룹별 일괄 선택/해제 버튼
  - 그룹 헤더에 선택 개수 표시
- **미배정 아이템 관리**:
  - 가방 섹션에 "미배정" 전용 카드 추가
  - 미배정 아이템 개수 및 총 무게 표시
  - 클릭으로 미배정 필터링 가능
- **준비물 선택 화면**:
  - "추가됨 숨기기" 필터 버튼 추가
  - 그룹화 시스템 적용 (분류별/중요도별)
  - 그룹별 일괄 선택 기능

### Fixed

#### 가방 삭제 버그 수정

- **문제**: 가방 삭제 시 trip-items에서 제거되지 않고 배정된 아이템들의 bagId가 초기화되지 않음
- **해결**:
  - `deleteTripItem` 함수 개선: 가방 삭제 시 배정된 아이템들의 bagId 자동 초기화
  - 여행 리스트에서 가방 아이템을 올바르게 삭제
  - 데이터 무결성 보장

#### 대시보드 앱 로딩 문제 수정

- **문제**: 로그인 후 대시보드에 앱이 표시되지 않음
- **해결**: 공용 앱(public) 로딩 추가

#### API 검증 로직 개선

- **문제**: `bagId` 빈 문자열을 허용하지 않음 (미배정 처리 불가)
- **해결**: `batch-update-bag` API에서 `bagId === ""` 허용

### Changed

- **대시보드**: 공용 도구, 개인 도구, 관리자 도구 섹션 분리
- **필터 UI**: 드롭다운 → 그룹화 버튼으로 변경 (travel-prep)
- **가방 통계**: 미배정 아이템 계산 시 가방 아이템 제외

### Technical

- **배치 작업 패턴 강화**: CSV race condition 방지
- **Set 기반 상태 관리**: O(1) 조회 성능으로 collapse 상태 관리
- **useEffect 패턴**: `setTimeout`으로 groupedItems 계산 타이밍 이슈 해결
- **타입 안정성**: @types/papaparse 추가

---

## [0.2.0] - 2024-12-15

### Added

- 여행 준비 앱 (Travel Prep)
- 사용자 관리 앱 (Admin Only)
- 배치 작업 API (trip-items/batch, batch-delete, batch-update-bag)

### Fixed

- JWT 토큰 검증 로직 개선
- CSV 파일 자동 초기화 기능

---

## [0.1.0] - 2024-12-10

### Added

- 초기 프로젝트 설정 (Next.js 15 + React 19)
- JWT 인증 시스템
- CSV 기반 데이터 레이어
- 공용 샘플 앱 (계산기, 메모장, 날씨)
- 3단계 인증 시스템 (Context, ProtectedRoute, API)
- Tailwind CSS v4 UI 컴포넌트
